const { createProduct,
    getProducts,
    getProductById,
    updateProductById,
    deleteById } = require('../controllers/productController');

const router = require('express').Router();

// CORS middleware
router.use((req, res, next) => {
  // Allow requests from localhost:3000 and https://alabites-ordering-app.vercel.app/
  res.setHeader('Access-Control-Allow-Origin', 'http://localhost:3000, https://alabites-ordering-app.vercel.app/');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, DELETE');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type');
  next();
});


// Define your routes below
router.post('/', createProduct); //secure
router.get('/', getProducts);
router.get('/:id', getProductById);
router.put('/:id', updateProductById);//secure
router.delete('/:id', deleteById);//secure

module.exports = router;
